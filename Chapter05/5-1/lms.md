# 트랜잭션과 잠금
- 잠금과 트랜잭션은 비슷한 개념 같지만 잠금은 동시성 제어, 트랜잭션은 데이터의 정합성을 보장하기 위한 기능이다.
- 잠금은 여러 커넥션에서 동시에 동일한 자원을 요청할 경우 순서대로 한 시점에서 하나의 커넥션만 변경할 수 있게 해주는 역할을 한다.

## 5-1 트랜잭션
- MyISAM이나 MEMORY 스토리지 엔진은 트랜잭션을 제공하지 않고, InnoDB 스토리지 엔진은 트랜잭션을 제공한다. 이 두 가지 경우에서 처리 방식 차이를 알아보자.

### MySQL에서의 트랜잭션
- 트랜잭션은 쿼리 수에 상관없이 요청한 논리적은 작업이 모두 커밋되거나 롤백되는 것을 보장해주는 것에 큰 의미가 있다.
    - 트랜잭션을 제공하지 않는 스토리지 엔진은 요청된 논리 작업에서 에러가 발생한 부분만 롤백하고, 나머지는 커밋하지만, InnoDB는 트랜잭션을 제공하므로 에러가 발생하면 모두 롤백한다.
    - 이러한 차이는 데이터 정합성을 맞추는 데 어려움을 만들어낸다.
- 트랜잭션이 지원되지 않는다면 모든 상황에 맞춰 if else로 가득한 끔직한 코드를 만들어야 하지만, InnoDB는 exception 시 롤백하는 코드만 작성하면 된다.