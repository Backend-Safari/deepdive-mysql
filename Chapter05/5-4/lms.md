## 5-4 MySQL 격리 수준
- 격리수준이란 트랜잭션이 동시에 처리될 때 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있게 허용할지 말지를 결정하는 것이다.
- 수준이 높을수록 격리 정도가 높아지며, 동시 처리 성능도 떨어지는 것이 일반적이다.

### READ UNCOMMITTED
- 해당 경리 수준에서는 insert, update, delete 명령 후 커밋하지 않아도 다른 사용자가 결과를 조회할 수 있다.
    - 트랜잭션에서 처리한 작업이 완료되지 않았는데도 다른 트랜잭션에서 데이터를 확인할 수 있는 현상이 더티 리드라 한다.

### READ COMMITTED
- 해당 격리 수준에서는 트랜잭션에서 변경한 데이터가 커밋되어야 다른 트랜잭션에서 조회할 수 있다.
    - 데이터 변경 후 커밋하기 전에 다른 트랜잭션에서 데이터를 조회한다면 백업된 언두 로그의 데이터를 조회한다.
- READ COMMITTED 격리 수준은 NON-REPEATABLE READ라는 부정합 문제가 있다.
    - 사용자가 하나의 트랜잭션에서 두 번의 select 쿼리를 실행하였을 때, 그 사이 다른 트랜잭션에서 커밋이 발생한다면 다른 데이터를 조회하게 된다. REPEATABLE READ 정합성에 어긋난다.

### REPEATABLE READ
- 해당 격리 수준은 InnoDB 스토리지 엔진에서 기본으로 사용되는 격리 수준이다.
    - InnoDB 스토리지 엔진은 트랜잭션이 롤백될 가능성을 대비하여 변경되기 전 레코드를 언두 로그 공간에 백업하고 실제 레코드를 변경하며, 이러한 방식을 MVCC 라고 한다.
    - 언두 로그를 이용해 동일 트랜잭션 내에서는 동일한 결과를 보여줄 수 있게 보장한다.
- InnoDB의 트랜잭션은 auto_increament로 생성되는 고유한 트랜잭션 번호를 가지며, 언두 영역에 백업된 모든 레코드에는 변경을 발생시킨 트랜잭션의 번호가 포함되어 있다. MVCC를 보장하기 위해 실행 중인 트랜잭션의 가장 오래된 번호를 기준으로 언두 로그 영역을 제한한다.
- 다른 트랜잭션에서 수행한 변경 작업에 의해 레코드가 보였다 안 보였다 하는 현상을 PHANTOM READ라고 한다. 레코드에 쓰기 잠금을 걸어야 하는데, 언두 레코드에는 잠금을 걸 수 없어서 발생하는 현상이다.

### SERIALIZABLE
- 다른 격리 수준과 다르게 SERIALIZABLE 격리 수준은 읽기 작업도 공유 잠금을 획득해야만 한다.
- PHANTOM READ가 발생하지 않지만 InnoDB 스토리지 엔진은 갭 락과 넥스트 키 락 덕분에 REPEATABLE READ 격리 수준에서도 방지할 수 있으므로 굳이 사용할 필요성은 없다.